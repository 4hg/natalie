#!/usr/bin/env ruby

require 'tempfile'
require_relative '../lib/natalie/compiler'

path = ARGV.first
ast = Parser.parse(File.read(path))
compiler = Natalie::Compiler.new(ast, path)
out = Tempfile.create('natalie')
out.close
compiler.out_path = out.path
compiler.compile
print `#{out.path} #{ARGV[1..-1].join(' ')}`
